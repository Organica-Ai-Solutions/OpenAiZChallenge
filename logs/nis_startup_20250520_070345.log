INFO:     Will watch for changes in these directories: ['/Users/diegofuego/Desktop/openai-to-z-nis']
INFO:     Uvicorn running on http://0.0.0.0:8001 (Press CTRL+C to quit)
INFO:     Started reloader process [90512] using StatReload
Starting NIS Protocol API server on 0.0.0.0:8001
2025-05-20 07:04:00,212 - src.meta.coordinator - INFO - MetaProtocolCoordinator initialized
2025-05-20 07:04:00,212 - src.meta.gpt_integration - ERROR - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-20 07:04:00,212 - src.agents.vision_agent - WARNING - Failed to initialize GPT Vision: Client.__init__() got an unexpected keyword argument 'proxies'. Falling back to mock responses.
2025-05-20 07:04:00,212 - src.agents.reasoning_agent - INFO - Loaded reasoning prompt from src/prompts/reasoning_prompt.txt
2025-05-20 07:04:00,212 - src.meta.gpt_integration - ERROR - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-20 07:04:00,212 - src.agents.reasoning_agent - WARNING - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'. Falling back to mock responses.
2025-05-20 07:04:00,212 - src.agents.reasoning_agent - INFO - Reasoning Agent initialized
2025-05-20 07:04:00,212 - src.meta.gpt_integration - ERROR - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-20 07:04:00,213 - src.agents.memory_agent - WARNING - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'. Using basic memory functions.
2025-05-20 07:04:00,456 - src.infrastructure.redis_client - INFO - Connected to Redis at localhost:6379
2025-05-20 07:04:00,467 - src.agents.memory_agent - INFO - Initialized Redis for Memory Agent caching
2025-05-20 07:04:00,547 - src.infrastructure.kafka_client - INFO - Kafka producer initialized for localhost:9092
2025-05-20 07:04:00,547 - src.agents.memory_agent - INFO - Initialized Kafka for Memory Agent events
2025-05-20 07:04:00,547 - src.agents.memory_agent - INFO - Memory Agent initialized with storage at outputs/memory
2025-05-20 07:04:00,547 - src.agents.action_agent - INFO - Action Agent initialized with output dir at outputs/findings
2025-05-20 07:04:00,547 - src.meta.coordinator - INFO - Registered protocol adapter: mcp
2025-05-20 07:04:00,547 - src.meta.coordinator - INFO - Registered protocol adapter: acp
2025-05-20 07:04:00,547 - src.meta.coordinator - INFO - Registered protocol adapter: a2a
2025-05-20 07:04:00,547 - src.meta.coordinator - INFO - Registered agent: vision_agent
2025-05-20 07:04:00,547 - src.meta.coordinator - INFO - Registered agent: reasoning_agent
2025-05-20 07:04:00,547 - src.meta.coordinator - INFO - Registered agent: memory_agent
2025-05-20 07:04:00,548 - src.meta.coordinator - INFO - Registered agent: action_agent
2025-05-20 07:04:00,548 - api.agent_integrator - INFO - NIS Protocol agents and coordinator initialized successfully
INFO:     Started server process [90515]
INFO:     Waiting for application startup.
2025-05-20 07:04:07,797 - src.infrastructure.kafka_client - INFO - Started consumer for topic nis.analysis.events
2025-05-20 07:04:07,797 - src.monitoring.statistics - ERROR - Error consuming events: object NoneType can't be used in 'await' expression
2025-05-20 07:04:07,797 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:04:07,798 - nis_api - INFO - API server starting up
2025-05-20 07:04:07,798 - nis_api - INFO - Redis client initialized
2025-05-20 07:04:07,798 - nis_api - INFO - Kafka client initialized
2025-05-20 07:04:07,798 - src.infrastructure.kafka_client - WARNING - Consumer for topic nis.analysis.events is already running
2025-05-20 07:04:07,798 - src.infrastructure.kafka_client - INFO - Started consumer for topic nis.batch.events
2025-05-20 07:04:07,798 - src.infrastructure.kafka_client - INFO - Started consumer for topic nis.statistics.events
INFO:     Application startup complete.
2025-05-20 07:04:08,093 - src.infrastructure.kafka_client - ERROR - Consumer error: KafkaError{code=UNKNOWN_TOPIC_OR_PART,val=3,str="Subscribed topic not available: nis.analysis.events: Broker: Unknown topic or partition"}
2025-05-20 07:04:08,094 - src.infrastructure.kafka_client - INFO - Consumer closed for topic nis.analysis.events
2025-05-20 07:04:08,140 - src.infrastructure.kafka_client - ERROR - Consumer error: KafkaError{code=UNKNOWN_TOPIC_OR_PART,val=3,str="Subscribed topic not available: nis.batch.events: Broker: Unknown topic or partition"}
2025-05-20 07:04:08,140 - src.infrastructure.kafka_client - ERROR - Consumer error: KafkaError{code=UNKNOWN_TOPIC_OR_PART,val=3,str="Subscribed topic not available: nis.statistics.events: Broker: Unknown topic or partition"}
2025-05-20 07:04:08,140 - src.infrastructure.kafka_client - INFO - Consumer closed for topic nis.batch.events
2025-05-20 07:04:08,141 - src.infrastructure.kafka_client - INFO - Consumer closed for topic nis.statistics.events
2025-05-20 07:05:07,803 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:06:07,811 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:07:07,815 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:08:07,819 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:09:07,823 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:10:07,828 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:11:07,835 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:12:07,841 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:13:07,848 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:14:07,854 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:15:07,858 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:16:07,862 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:17:07,867 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:18:07,871 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:19:07,876 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
WARNING:  StatReload detected changes in 'src/data_processing/lidar/lidar_processor.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-05-20 07:19:19,835 - nis_api - INFO - API server shutting down
2025-05-20 07:19:19,838 - src.infrastructure.redis_client - INFO - Redis connection closed
2025-05-20 07:19:19,838 - nis_api - INFO - Redis connection closed
2025-05-20 07:19:19,839 - src.infrastructure.kafka_client - INFO - Kafka client closed
2025-05-20 07:19:19,839 - nis_api - INFO - Kafka connection closed
INFO:     Application shutdown complete.
INFO:     Finished server process [90515]
2025-05-20 07:19:22,468 - src.meta.coordinator - INFO - MetaProtocolCoordinator initialized
2025-05-20 07:19:22,468 - src.meta.gpt_integration - ERROR - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-20 07:19:22,468 - src.agents.vision_agent - WARNING - Failed to initialize GPT Vision: Client.__init__() got an unexpected keyword argument 'proxies'. Falling back to mock responses.
2025-05-20 07:19:22,468 - src.agents.reasoning_agent - INFO - Loaded reasoning prompt from src/prompts/reasoning_prompt.txt
2025-05-20 07:19:22,469 - src.meta.gpt_integration - ERROR - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-20 07:19:22,469 - src.agents.reasoning_agent - WARNING - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'. Falling back to mock responses.
2025-05-20 07:19:22,469 - src.agents.reasoning_agent - INFO - Reasoning Agent initialized
2025-05-20 07:19:22,469 - src.meta.gpt_integration - ERROR - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-20 07:19:22,469 - src.agents.memory_agent - WARNING - Failed to initialize GPT integration: Client.__init__() got an unexpected keyword argument 'proxies'. Using basic memory functions.
2025-05-20 07:19:22,686 - src.infrastructure.redis_client - INFO - Connected to Redis at localhost:6379
2025-05-20 07:19:22,687 - src.agents.memory_agent - INFO - Initialized Redis for Memory Agent caching
2025-05-20 07:19:22,791 - src.infrastructure.kafka_client - INFO - Kafka producer initialized for localhost:9092
2025-05-20 07:19:22,792 - src.agents.memory_agent - INFO - Initialized Kafka for Memory Agent events
2025-05-20 07:19:22,792 - src.agents.memory_agent - INFO - Memory Agent initialized with storage at outputs/memory
2025-05-20 07:19:22,792 - src.agents.action_agent - INFO - Action Agent initialized with output dir at outputs/findings
2025-05-20 07:19:22,792 - src.meta.coordinator - INFO - Registered protocol adapter: mcp
2025-05-20 07:19:22,792 - src.meta.coordinator - INFO - Registered protocol adapter: acp
2025-05-20 07:19:22,792 - src.meta.coordinator - INFO - Registered protocol adapter: a2a
2025-05-20 07:19:22,792 - src.meta.coordinator - INFO - Registered agent: vision_agent
2025-05-20 07:19:22,792 - src.meta.coordinator - INFO - Registered agent: reasoning_agent
2025-05-20 07:19:22,793 - src.meta.coordinator - INFO - Registered agent: memory_agent
2025-05-20 07:19:22,793 - src.meta.coordinator - INFO - Registered agent: action_agent
2025-05-20 07:19:22,793 - api.agent_integrator - INFO - NIS Protocol agents and coordinator initialized successfully
INFO:     Started server process [92099]
INFO:     Waiting for application startup.
2025-05-20 07:19:24,188 - src.infrastructure.kafka_client - INFO - Started consumer for topic nis.analysis.events
2025-05-20 07:19:24,191 - src.monitoring.statistics - ERROR - Error consuming events: object NoneType can't be used in 'await' expression
2025-05-20 07:19:24,191 - src.monitoring.statistics - ERROR - Error in periodic snapshot: 'RedisClient' object has no attribute 'set'
2025-05-20 07:19:24,191 - nis_api - INFO - API server starting up
2025-05-20 07:19:24,192 - nis_api - INFO - Redis client initialized
2025-05-20 07:19:24,192 - nis_api - INFO - Kafka client initialized
2025-05-20 07:19:24,192 - src.infrastructure.kafka_client - WARNING - Consumer for topic nis.analysis.events is already running
2025-05-20 07:19:24,193 - src.infrastructure.kafka_client - INFO - Started consumer for topic nis.batch.events
2025-05-20 07:19:24,193 - src.infrastructure.kafka_client - INFO - Started consumer for topic nis.statistics.events
INFO:     Application startup complete.
2025-05-20 07:19:24,499 - src.infrastructure.kafka_client - ERROR - Consumer error: KafkaError{code=UNKNOWN_TOPIC_OR_PART,val=3,str="Subscribed topic not available: nis.analysis.events: Broker: Unknown topic or partition"}
2025-05-20 07:19:24,499 - src.infrastructure.kafka_client - ERROR - Consumer error: KafkaError{code=UNKNOWN_TOPIC_OR_PART,val=3,str="Subscribed topic not available: nis.statistics.events: Broker: Unknown topic or partition"}
2025-05-20 07:19:24,500 - src.infrastructure.kafka_client - INFO - Consumer closed for topic nis.statistics.events
2025-05-20 07:19:24,500 - src.infrastructure.kafka_client - INFO - Consumer closed for topic nis.analysis.events
2025-05-20 07:19:24,839 - src.infrastructure.kafka_client - ERROR - Consumer error: KafkaError{code=UNKNOWN_TOPIC_OR_PART,val=3,str="Subscribed topic not available: nis.batch.events: Broker: Unknown topic or partition"}
2025-05-20 07:19:24,839 - src.infrastructure.kafka_client - INFO - Consumer closed for topic nis.batch.events
INFO:     Shutting down
INFO:     Waiting for application shutdown.
2025-05-20 07:19:54,458 - nis_api - INFO - API server shutting down
2025-05-20 07:19:54,459 - src.infrastructure.redis_client - INFO - Redis connection closed
2025-05-20 07:19:54,459 - nis_api - INFO - Redis connection closed
2025-05-20 07:19:54,460 - src.infrastructure.kafka_client - INFO - Kafka client closed
2025-05-20 07:19:54,460 - nis_api - INFO - Kafka connection closed
INFO:     Application shutdown complete.
INFO:     Finished server process [92099]
INFO:     Stopping reloader process [90512]
